{"version":3,"file":"svg-library.min.js","sources":["../src/Canvas.ts","../src/index.ts"],"sourcesContent":["interface Point {\n  x: number;\n  y: number;\n  color: string;\n}\n\ntype SvgInHtml = HTMLElement & SVGElement;\ntype SvgCircle = HTMLElement & SVGCircleElement;\n\nconst SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\n\nexport class Canvas {\n  private points: SvgCircle[] = [];\n  private canvas: SvgInHtml;\n  private draggingObject: SvgCircle;\n  private dragging = false;\n\n  constructor(canvasId: string) {\n    this.canvas = <SvgInHtml>document.getElementById(canvasId);\n    this.canvas.addEventListener(\"mousemove\", this.drag.bind(this));\n    this.canvas.addEventListener(\"mouseup\", this.endDrag.bind(this));\n    this.canvas.addEventListener(\"mouseleave\", this.endDrag.bind(this));\n    this.canvas.addEventListener(\"dblclick\", this.addPointOnClick.bind(this));\n  }\n\n  /**\n   * Adds point to canvas\n   * @param x x coordinate\n   * @param y y coordinate\n   * @param color color of point\n   */\n  public addPoint(x: number, y: number, color?: string): void {\n    const circle: SvgCircle = <SvgCircle>document.createElementNS(SVG_NAMESPACE, \"circle\");\n    circle.setAttributeNS(null, \"cx\", x.toString());\n    circle.setAttributeNS(null, \"cy\", y.toString());\n    circle.setAttributeNS(null, \"r\", \"5\");\n    circle.setAttributeNS(\n      null,\n      \"style\",\n      `fill: ${color || \"black\"}; stroke: ${color || \"black\"}; stroke-width: 1px; cursor: move;`\n    );\n    circle.addEventListener(\"mousedown\", this.startDrag.bind(this));\n\n    this.points.push(circle);\n    this.canvas.appendChild(circle);\n  }\n\n  /**\n   * Adds point on click\n   * @param event click event\n   */\n  private addPointOnClick(event: MouseEvent) {\n    this.addPoint(event.offsetX, event.offsetY);\n  }\n\n  /**\n   * Sets background color of canvas\n   * @param color\n   */\n  public setBackgroundColor(color: string) {\n    this.canvas.style.backgroundColor = color;\n  }\n\n  /**\n   * Starts dragging point on click\n   * @param event mousedown event\n   */\n  private startDrag(event: MouseEvent) {\n    this.draggingObject = <SvgCircle>event.target;\n    this.draggingObject.style.fill = \"red\";\n    this.dragging = true;\n  }\n\n  /**\n   * Drags element while mouse is clicked\n   * @param event mousemove event\n   */\n  private drag(event: MouseEvent) {\n    if (this.dragging && this.draggingObject) {\n      this.draggingObject.setAttributeNS(null, \"cx\", event.offsetX.toString());\n      this.draggingObject.setAttributeNS(null, \"cy\", event.offsetY.toString());\n    }\n  }\n\n  /**\n   * Stops dragging element\n   * @param event mouseup event\n   */\n  private endDrag(_: MouseEvent) {\n    if (this.dragging) {\n      this.dragging = false;\n      this.draggingObject.style.fill = \"black\";\n      this.draggingObject = null;\n    }\n  }\n}\n","import { Canvas } from \"./Canvas\";\nconst svgLibrary = { Canvas };\nexport default svgLibrary;\n"],"names":["canvasId","canvas","document","getElementById","addEventListener","drag","bind","endDrag","addPointOnClick","Canvas","x","y","color","circle","createElementNS","setAttributeNS","toString","startDrag","points","push","appendChild","event","addPoint","offsetX","offsetY","style","backgroundColor","draggingObject","target","fill","dragging"],"mappings":"wDAiBE,UAAA,CAAYA,CAAZ,EALQ,WAAA,CAAsB,GAGtB,aAAA,IAGN,KAAKC,MAAL,CAAyBC,QAAQ,CAACC,cAAT,CAAwBH,CAAxB,EACzB,KAAKC,MAAL,CAAYG,gBAAZ,CAA6B,WAA7B,CAA0C,KAAKC,IAAL,CAAUC,IAAV,CAAe,IAAf,CAA1C,EACA,KAAKL,MAAL,CAAYG,gBAAZ,CAA6B,SAA7B,CAAwC,KAAKG,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CAAxC,EACA,KAAKL,MAAL,CAAYG,gBAAZ,CAA6B,YAA7B,CAA2C,KAAKG,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CAA3C,EACA,KAAKL,MAAL,CAAYG,gBAAZ,CAA6B,UAA7B,CAAyC,KAAKI,eAAL,CAAqBF,IAArB,CAA0B,IAA1B,CAAzC,CACD,CAwEH,MAhESG,CAAAA,WAAA,SAAA,CAAP,SAAgBC,CAAhB,CAA2BC,CAA3B,CAAsCC,CAAtC,EACE,GAAMC,CAAAA,CAAM,CAAyBX,QAAQ,CAACY,eAAT,8BAAwC,QAAxC,CAArC,CACAD,CAAM,CAACE,cAAP,CAAsB,IAAtB,CAA4B,IAA5B,CAAkCL,CAAC,CAACM,QAAF,EAAlC,EACAH,CAAM,CAACE,cAAP,CAAsB,IAAtB,CAA4B,IAA5B,CAAkCJ,CAAC,CAACK,QAAF,EAAlC,EACAH,CAAM,CAACE,cAAP,CAAsB,IAAtB,CAA4B,GAA5B,CAAiC,GAAjC,EACAF,CAAM,CAACE,cAAP,CACE,IADF,CAEE,OAFF,CAGE,UAASH,CAAK,EAAI,OAAlB,cAAA,EAAsCA,CAAK,EAAI,OAA/C,sCAHF,EAKAC,CAAM,CAACT,gBAAP,CAAwB,WAAxB,CAAqC,KAAKa,SAAL,CAAeX,IAAf,CAAoB,IAApB,CAArC,EAEA,KAAKY,MAAL,CAAYC,IAAZ,CAAiBN,CAAjB,EACA,KAAKZ,MAAL,CAAYmB,WAAZ,CAAwBP,CAAxB,CACD,CAkDH,CA5CUJ,WAAA,gBAAA,CAAR,SAAwBY,CAAxB,EACE,KAAKC,QAAL,CAAcD,CAAK,CAACE,OAApB,CAA6BF,CAAK,CAACG,OAAnC,CACD,CA0CH,CApCSf,WAAA,mBAAA,CAAP,SAA0BG,CAA1B,EACE,KAAKX,MAAL,CAAYwB,KAAZ,CAAkBC,eAAlB,CAAoCd,CACrC,CAkCH,CA5BUH,WAAA,UAAA,CAAR,SAAkBY,CAAlB,EACE,KAAKM,cAAL,CAAiCN,CAAK,CAACO,OACvC,KAAKD,cAAL,CAAoBF,KAApB,CAA0BI,IAA1B,CAAiC,MACjC,KAAKC,QAAL,GACD,CAwBH,CAlBUrB,WAAA,KAAA,CAAR,SAAaY,CAAb,EACM,KAAKS,QAAL,EAAiB,KAAKH,iBACxB,KAAKA,cAAL,CAAoBZ,cAApB,CAAmC,IAAnC,CAAyC,IAAzC,CAA+CM,CAAK,CAACE,OAAN,CAAcP,QAAd,EAA/C,EACA,KAAKW,cAAL,CAAoBZ,cAApB,CAAmC,IAAnC,CAAyC,IAAzC,CAA+CM,CAAK,CAACG,OAAN,CAAcR,QAAd,EAA/C,EAEH,CAaH,CAPUP,WAAA,QAAA,CAAR,WACM,KAAKqB,WACP,KAAKA,QAAL,IACA,KAAKH,cAAL,CAAoBF,KAApB,CAA0BI,IAA1B,CAAiC,QACjC,KAAKF,cAAL,CAAsB,KAEzB,CACH,EAAC,UC9FkB,CAAElB,MAAM,EAAR"}