{"version":3,"file":"svg-library.min.js","sources":["../src/Canvas.ts","../src/ConvexHull.ts","../src/index.ts"],"sourcesContent":["interface Point {\n  x: number;\n  y: number;\n  color: string;\n}\n\ntype SvgInHtml = HTMLElement & SVGElement;\ntype SvgCircle = HTMLElement & SVGCircleElement;\n\nconst SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\n\nexport class Canvas {\n  private points: SvgCircle[] = [];\n  private canvas: SvgInHtml;\n  private draggingObject: SvgCircle;\n  private dragging = false;\n\n  constructor(canvasId: string) {\n    this.canvas = <SvgInHtml>document.getElementById(canvasId);\n    this.canvas.addEventListener(\"mousemove\", this.drag.bind(this));\n    this.canvas.addEventListener(\"mouseup\", this.endDrag.bind(this));\n    this.canvas.addEventListener(\"mouseleave\", this.endDrag.bind(this));\n    this.canvas.addEventListener(\"dblclick\", this.addPointOnClick.bind(this));\n  }\n\n  /**\n   * Returns points in canvas\n   */\n  public getPoints(): SvgCircle[] {\n    return this.points;\n  }\n\n  /**\n   * Adds point to canvas\n   * @param x x coordinate\n   * @param y y coordinate\n   * @param color color of point\n   */\n  public addPoint(x: number, y: number, color?: string): void {\n    const circle: SvgCircle = <SvgCircle>document.createElementNS(SVG_NAMESPACE, \"circle\");\n    circle.setAttributeNS(null, \"cx\", x.toString());\n    circle.setAttributeNS(null, \"cy\", y.toString());\n    circle.setAttributeNS(null, \"r\", \"5\");\n    circle.setAttributeNS(\n      null,\n      \"style\",\n      `fill: ${color || \"black\"}; stroke: ${color || \"black\"}; stroke-width: 1px; cursor: move;`\n    );\n    circle.addEventListener(\"mousedown\", this.startDrag.bind(this));\n\n    this.points.push(circle);\n    this.canvas.appendChild(circle);\n  }\n\n  /**\n   * Adds point on click\n   * @param event click event\n   */\n  private addPointOnClick(event: MouseEvent) {\n    this.addPoint(event.offsetX, event.offsetY);\n  }\n\n  /**\n   * Sets background color of canvas\n   * @param color\n   */\n  public setBackgroundColor(color: string) {\n    this.canvas.style.backgroundColor = color;\n  }\n\n  /**\n   * Starts dragging point on click\n   * @param event mousedown event\n   */\n  private startDrag(event: MouseEvent) {\n    this.draggingObject = <SvgCircle>event.target;\n    this.draggingObject.style.fill = \"red\";\n    this.dragging = true;\n  }\n\n  /**\n   * Drags element while mouse is clicked\n   * @param event mousemove event\n   */\n  private drag(event: MouseEvent) {\n    if (this.dragging && this.draggingObject) {\n      this.draggingObject.setAttributeNS(null, \"cx\", event.offsetX.toString());\n      this.draggingObject.setAttributeNS(null, \"cy\", event.offsetY.toString());\n    }\n  }\n\n  /**\n   * Stops dragging element\n   * @param event mouseup event\n   */\n  private endDrag(_: MouseEvent) {\n    if (this.dragging) {\n      this.dragging = false;\n      this.draggingObject.style.fill = \"black\";\n      this.draggingObject = null;\n    }\n  }\n}\n","import { SvgCircle } from \"./Canvas\";\n\nexport class ConvexHull {\n  constructor() {}\n\n  /**\n   * Creates convex hull and paints convex hull points with green color\n   * @param points array of points\n   */\n  public createConvexHull(points: SvgCircle[]): SvgCircle[] {\n    console.log(\"points\", points);\n    const convexHull: SvgCircle[] = [];\n    let leftmostPoint: SvgCircle = points[0];\n\n    // Find the leftmost point\n    points.slice(1).forEach((p: SvgCircle) => {\n      if (Number(p.getAttribute(\"cx\")) < Number(leftmostPoint.getAttribute(\"cx\"))) {\n        leftmostPoint = p;\n      }\n    });\n\n    let pointOnHull: SvgCircle = leftmostPoint;\n    let endpoint: SvgCircle;\n    let i = 0;\n    do {\n      pointOnHull.style.fill = \"green\";\n      convexHull.push(pointOnHull);\n      endpoint = points[0];\n\n      for (let j = 0; j < points.length; j++) {\n        if (this.isPointEqual(endpoint, pointOnHull) || this.isOnLeft(pointOnHull, endpoint, points[j])) {\n          endpoint = points[j];\n        }\n      }\n      pointOnHull = endpoint;\n      i++;\n    } while (!this.isPointEqual(endpoint, convexHull[0]) && i < 50);\n    return convexHull;\n  }\n\n  /**\n   * Check if pointC is on left side of line going from pointA to pointB\n   * @param pointA First point\n   * @param pointB Second point\n   * @param pointC Point that we are checking if is on left\n   */\n  private isOnLeft(pointA: SvgCircle, pointB: SvgCircle, pointC: SvgCircle): boolean {\n    const d =\n      (Number(pointC.getAttribute(\"cx\")) - Number(pointA.getAttribute(\"cx\"))) *\n        (Number(pointB.getAttribute(\"cy\")) - Number(pointA.getAttribute(\"cy\"))) -\n      (Number(pointC.getAttribute(\"cy\")) - Number(pointA.getAttribute(\"cy\"))) *\n        (Number(pointB.getAttribute(\"cx\")) - Number(pointA.getAttribute(\"cx\")));\n\n    return d < 0;\n  }\n\n  private isPointEqual(pointA: SvgCircle, pointB: SvgCircle) {\n    if (\n      Number(pointA.getAttribute(\"cx\")) === Number(pointB.getAttribute(\"cx\")) &&\n      Number(pointA.getAttribute(\"cy\")) === Number(pointB.getAttribute(\"cy\"))\n    ) {\n      return true;\n    }\n    return false;\n  }\n}\n","import { Canvas } from \"./Canvas\";\nimport { ConvexHull } from \"./ConvexHull\";\nconst svgLibrary = { Canvas, ConvexHull };\nexport default svgLibrary;\n"],"names":["canvasId","canvas","document","getElementById","addEventListener","drag","bind","endDrag","addPointOnClick","Canvas","points","x","y","color","circle","createElementNS","setAttributeNS","toString","startDrag","push","appendChild","event","addPoint","offsetX","offsetY","style","backgroundColor","draggingObject","target","fill","dragging","ConvexHull","console","log","convexHull","leftmostPoint","slice","forEach","p","getAttribute","endpoint","pointOnHull","i","j","length","isPointEqual","isOnLeft","pointA","pointB","pointC","d"],"mappings":"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"}