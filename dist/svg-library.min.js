var svgLibrary=function(){'use strict';var d=Math.floor,e=Math.sqrt,f=Math.pow;function a(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new(c||(c=Promise))(function(c,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?c(a.value):e(a.value).then(g,h)}i((d=d.apply(a,b||[])).next())})}function b(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(e)throw new TypeError("Generator is already executing.");for(;k;)try{if(e=1,h&&(i=2&c[0]?h["return"]:c[0]?h["throw"]||((i=h["return"])&&i.call(h),0):h.next)&&!(i=i.call(h,c[1])).done)return i;switch((h=0,i)&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return k.label++,{value:c[1],done:!1};case 5:k.label++,h=c[1],c=[0];continue;case 7:c=k.ops.pop(),k.trys.pop();continue;default:if((i=k.trys,!(i=0<i.length&&i[i.length-1]))&&(6===c[0]||2===c[0])){k=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){k.label=c[1];break}if(6===c[0]&&k.label<i[1]){k.label=i[1],i=c;break}if(i&&k.label<i[2]){k.label=i[2],k.ops.push(c);break}i[2]&&k.ops.pop(),k.trys.pop();continue;}c=b.call(a,k)}catch(a){c=[6,a],h=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e,h,i,j,k={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return j={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(j[Symbol.iterator]=function(){return this}),j}function c(){for(var b=0,c=0,d=arguments.length;c<d;c++)b+=arguments[c].length;for(var e=Array(b),f=0,c=0;c<d;c++)for(var g=arguments[c],a=0,h=g.length;a<h;a++,f++)e[f]=g[a];return e}var g=function(){function a(a){this.points=[],this.dragging=!1,this.polygon={points:[],lines:[]},this.creatingPolygon=!1,this.canvas=document.getElementById(a),this.canvas.addEventListener("mousemove",this.drag.bind(this)),this.canvas.addEventListener("mouseup",this.endDrag.bind(this)),this.canvas.addEventListener("mouseleave",this.endDrag.bind(this)),this.canvas.addEventListener("dblclick",this.addPointOnClick.bind(this)),this.canvas.addEventListener("click",this.addPolygonPoint.bind(this))}return a.prototype.getPoints=function(){return this.points},a.prototype.getCanvas=function(){return this.canvas},a.prototype.addPoint=function(a,b,c){console.log("this.addPoint("+a+", "+b+", \"black\")");var d=document.createElementNS("http://www.w3.org/2000/svg","circle");return d.setAttributeNS(null,"cx",a.toString()),d.setAttributeNS(null,"cy",b.toString()),d.setAttributeNS(null,"r","3"),d.setAttributeNS(null,"style","fill: "+(c||"black")+"; stroke: "+(c||"black")+"; stroke-width: 1px; cursor: move;"),d.addEventListener("mousedown",this.startDrag.bind(this)),this.points.push(d),this.canvas.appendChild(d),d},a.prototype.addPointOnClick=function(a){return this.addPoint(a.offsetX,a.offsetY)},a.prototype.setBackgroundColor=function(a){this.canvas.style.backgroundColor=a},a.prototype.startDrag=function(a){this.draggingObject=a.target,this.draggingObject.style.fill="red",this.dragging=!0},a.prototype.drag=function(a){this.dragging&&this.draggingObject&&(this.draggingObject.setAttributeNS(null,"cx",a.offsetX.toString()),this.draggingObject.setAttributeNS(null,"cy",a.offsetY.toString()))},a.prototype.endDrag=function(){this.dragging&&(this.dragging=!1,this.draggingObject.style.fill="black",this.draggingObject=null)},a.prototype.removeLines=function(){var a=this.canvas.getElementsByClassName("line"),b=Array.from(a);b.forEach(function(a){return a.remove()})},a.prototype.removePoints=function(){this.points.forEach(function(a){return a.remove()}),this.points=[]},a.prototype.clearCanvas=function(){this.removeLines(),this.removePoints(),this.polygon={points:[],lines:[]}},a.prototype.addPolygonPoint=function(a){if(this.creatingPolygon){var b=this.addPointOnClick(a);if(this.polygon.points.push(b),1<this.polygon.points.length){var c=this.polygon.points[this.polygon.points.length-2],d=this.makeLine(b,c);this.polygon.lines.push(d)}if(2<this.polygon.points.length){3<this.polygon.points.length&&this.polygon.lines.splice(this.polygon.lines.length-2,1)[0].remove();var e=this.polygon.points[0],d=this.makeLine(e,b);this.polygon.lines.push(d)}}},a.prototype.makeLine=function(a,b,c,d){var e=document.createElementNS("http://www.w3.org/2000/svg","line");d&&e.setAttribute("id",d),e.setAttribute("class","line"),e.setAttribute("x1",a.getAttribute("cx")),e.setAttribute("y1",a.getAttribute("cy")),e.setAttribute("x2",b.getAttribute("cx")),e.setAttribute("y2",b.getAttribute("cy")),e.setAttribute("stroke",c||"black");var f=this.canvas,g=f.appendChild(e);return g},a.prototype.makeLinePoints=function(a,b,c,d){var e=document.createElementNS("http://www.w3.org/2000/svg","line");d&&e.setAttribute("id",d),e.setAttribute("class","line"),e.setAttribute("x1",a.x.toString()),e.setAttribute("y1",a.y.toString()),e.setAttribute("x2",b.x.toString()),e.setAttribute("y2",b.y.toString()),e.setAttribute("stroke",c||"black");var f=this.canvas,g=f.appendChild(e);return g},a.prototype.getPolygon=function(){return this.polygon},a.prototype.startCreatingPolygon=function(){this.clearCanvas(),this.creatingPolygon=!0},a.prototype.stopCreatingPolygon=function(){this.creatingPolygon=!1},a.prototype.addRandomPoints=function(a){for(var b=0;b<a;b++){var c=Math.random()*(this.canvas.clientWidth-50-50)+50,d=Math.random()*(this.canvas.clientHeight-50-50)+50;this.addPoint(c,d)}},a.prototype.getSimplePoints=function(){var a=this.points.map(function(a){return{x:+a.getAttribute("cx"),y:+a.getAttribute("cy"),color:"black"}});return a},a.prototype.addCircle=function(a,b,c){void 0===c&&(c="black");var d=document.createElementNS("http://www.w3.org/2000/svg","circle");return d.setAttributeNS(null,"cx",a.x.toString()),d.setAttributeNS(null,"cy",a.y.toString()),d.setAttributeNS(null,"r",b.toString()),d.setAttributeNS(null,"style","fill: none; stroke: "+c+"; stroke-width: 1px; cursor: move;"),this.canvas.appendChild(d),d},a}(),h=function(){function a(a,b){this.center=a,this.radius=b}return a.prototype.isInside=function(a){return!!(k.DistanceSq(this.center,a)<f(this.radius,2))},a}(),i=function(){return function(a,b,c){void 0===c&&(c="black"),this.x=a,this.y=b,this.color=c}}(),k=function(){function a(){}return a.isOnLeft=function(a,b,c){var e=(+c.getAttribute("cx")-+a.getAttribute("cx"))*(+b.getAttribute("cy")-+a.getAttribute("cy"))-(+c.getAttribute("cy")-+a.getAttribute("cy"))*(+b.getAttribute("cx")-+a.getAttribute("cx"));return 0>e},a.isOnLeftPoints=function(a,b,c){var e=(c.x-a.x)*(b.y-a.y)-(c.y-a.y)*(b.x-a.x);return 0<e},a.DistanceSq=function(a,b){return f(a.x-b.x,2)+f(a.y-b.y,2)},a.Distance=function(b,c){return e(a.DistanceSq(b,c))},a.CreateCircleFromPoints=function(b,d,f){var g=a.GetCenterOfPoints(b,d,f),i=e(a.DistanceSq(g,b)),j=new h(g,i);return j},a.GetCenterOfPoints=function(a,b,c){var d=this.crossProduct(a,b,c);if(0!==d){var e=f(a.x,2)+f(a.y,2),g=f(b.x,2)+f(b.y,2),h=f(c.x,2)+f(c.y,2),j=e*(b.y-c.y)+g*(c.y-a.y)+h*(a.y-b.y),k=j/(2*d);j=e*(c.x-b.x)+g*(a.x-c.x)+h*(b.x-a.x);var l=j/(2*d),m=new i(k,l,"black");return m}return null},a.crossProduct=function(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=c.x-a.x,g=c.y-a.y;return d*g-e*f},a}(),l=function(){function c(a){this.canvas=a}return c.prototype.JarvisMarch=function(){return a(this,void 0,Promise,function(){var a,c,d,e,f,g,h,l;return b(this,function(b){switch(b.label){case 0:this.canvas.removeLines(),a=this.canvas.getPoints(),this.colorPointsBlack(a),c=[],d=a[0],a.slice(1).forEach(function(a){+a.getAttribute("cx")<+d.getAttribute("cx")&&(d=a)}),e=d,g=0,b.label=1;case 1:e.style.fill="red",c.push(e),f=a[0],h=void 0,l=0,b.label=2;case 2:return l<a.length?(h=this.canvas.makeLine(a[l],e,"green"),(this.isPointEqual(f,e)||k.isOnLeft(e,f,a[l]))&&(f=a[l]),[4,this.timer(5)]):[3,5];case 3:b.sent(),null===h||void 0===h?void 0:h.remove(),b.label=4;case 4:return l++,[3,2];case 5:f&&(this.canvas.makeLine(f,e,"red"),f.style.fill="red"),e=f,g++,b.label=6;case 6:if(!this.isPointEqual(f,c[0])&&50>g)return[3,1];b.label=7;case 7:return[2,new Promise(function(a){return a(c)})];}})})},c.prototype.colorPointsBlack=function(a){a.forEach(function(a){return a.style.fill="black"})},c.prototype.GrahamScan=function(){return a(this,void 0,Promise,function(){var a,c,d,e,f,g;return b(this,function(b){switch(b.label){case 0:this.canvas.removeLines(),a=this.canvas.getPoints(),this.colorPointsBlack(a),c=[],d=a.sort(function(a,b){return+a.getAttribute("cy")-+b.getAttribute("cy")}).sort(function(a,b){return+a.getAttribute("cx")-+b.getAttribute("cx")})[0],a.sort(function(c,a){return k.isOnLeft(d,c,a)?-1:1}),e=[],f=0,b.label=1;case 1:if(!(f<a.length))return[3,4];for(g=a[f];1<c.length&&k.isOnLeft(c[c.length-2],g,c[c.length-1]);)c.pop().style.fill="black",e.pop().remove();return 1<=c.length&&e.push(this.canvas.makeLine(c[c.length-1],g,"red")),c.push(g),g.style.fill="red",[4,this.timer(200)];case 2:b.sent(),b.label=3;case 3:return f++,[3,1];case 4:return e.push(this.canvas.makeLine(c[c.length-1],c[0],"red")),[2,new Promise(function(a){return a(c)})];}})})},c.prototype.isPointEqual=function(a,b){return+a.getAttribute("cx")===+b.getAttribute("cx")&&+a.getAttribute("cy")===+b.getAttribute("cy")},c.prototype.timer=function(a){return new Promise(function(b){return setTimeout(b,a)})},c}(),m=function(){return function(a,b){this.pointA=a,this.pointB=b}}(),n=function(){function g(a){this.canvas=a}return g.prototype.SweepingLine=function(){return a(this,void 0,Promise,function(){var a,d,e,f,g,h,j,l,m,n,o,p,q,r,s;return b(this,function(b){switch(b.label){case 0:if(a=this.canvas.getPolygon(),null==a||0==a.points.length)return alert("You have to create a polygon."),[2];for(d=c(a.points),e=c(a.points),d.sort(function(c,a){return+c.getAttribute("cy")>+a.getAttribute("cy")?-1:+c.getAttribute("cy")===+a.getAttribute("cy")?+c.getAttribute("cx")<+a.getAttribute("cx")?-1:1:1}),d[0].style.fill="green",d[d.length-1].style.fill="red",f=(e.indexOf(d[0])+1)%e.length,g=e.length-1,h=f,j=[],l=[],+e[f].getAttribute("cx")<+d[0].getAttribute("cx")?(m=j,n=l,o="yellow",p="white"):(m=l,n=j,o="white",p="yellow");0<g;)e[h]==d[d.length-1]?(m=n,o=p):(e[h].style.fill=o,m.push(e[h])),h=(h+1)%e.length,g--;q=[],q.push(d[0]),q.push(d[1]),r=2,b.label=1;case 1:if(!(r<d.length))return[3,4];if(j.includes(d[r])&&j.includes(q[q.length-1])||l.includes(d[r])&&l.includes(q[q.length-1])){for(;1<q.length&&(j.includes(d[r])&&k.isOnLeft(d[r],q[q.length-2],q[q.length-1])||l.includes(d[r])&&!k.isOnLeft(d[r],q[q.length-2],q[q.length-1]));)this.canvas.makeLine(d[r],q[q.length-2],"blue"),q.pop();q.push(d[r])}else{for(s=q[q.length-1];0<q.length;)this.canvas.makeLine(d[r],q.pop(),"red");q.push(s),q.push(d[r])}return[4,this.timer(500)];case 2:b.sent(),b.label=3;case 3:return r++,[3,1];case 4:return[2];}})})},g.prototype.Delaunay=function(a){var b=this;void 0===a&&(a=!1);var d=[],f=new o([]),g=c(this.canvas.getSimplePoints());if(a){var h=new i(-this.canvas.getCanvas().clientWidth,2*this.canvas.getCanvas().clientHeight),j=new i(2*this.canvas.getCanvas().clientWidth,2*this.canvas.getCanvas().clientHeight),l=new i(this.canvas.getCanvas().clientWidth/2,-this.canvas.getCanvas().clientHeight);g=c(g,[h,j,l])}var n,q,r,s=g[0],t=g.slice(1).map(function(a){return{point:a,distance:k.Distance(s,a)}}).sort(function(c,a){return c.distance-a.distance})[0].point,u=g.filter(function(a){return k.isOnLeftPoints(s,t,a)}),v=g.filter(function(a){return k.isOnLeftPoints(t,s,a)});if(0<u.length){n=new m(s,t);var w=u.sort(function(a,c){return b.delaunayDistance(a,n)-b.delaunayDistance(c,n)})[0];q=new m(t,w),r=new m(w,s)}else{n=new m(t,s);var w=v.sort(function(a,c){return b.delaunayDistance(a,n)-b.delaunayDistance(c,n)})[0];q=new m(s,w),r=new m(w,t)}f.add(n),f.add(q),f.add(r),d.push([n,q,r]);for(var x=function(){var a=f.firstEdge(),c=a.pointA,e=a.pointB,h=new m(a.pointB,a.pointA),i=g.filter(function(a){return k.isOnLeftPoints(e,c,a)});if(0<i.length){var j=i.filter(function(a){return null!=b.delaunayDistance(a,h)}).sort(function(a,c){return b.delaunayDistance(a,h)-b.delaunayDistance(c,h)})[0],l=new m(c,j),n=new m(j,e);0==f.edges.filter(function(a){return a.pointA==l.pointA&&a.pointB==l.pointB}).length&&0==f.edges.filter(function(a){return a.pointA==l.pointB&&a.pointB==l.pointA}).length&&0==f.dt.filter(function(a){return a.pointA==l.pointA&&a.pointB==l.pointB}).length&&0==f.dt.filter(function(a){return a.pointA==l.pointB&&a.pointB==l.pointA}).length&&f.add(l),0==f.edges.filter(function(a){return a.pointA==n.pointA&&a.pointB==n.pointB}).length&&0==f.edges.filter(function(a){return a.pointA==n.pointB&&a.pointB==n.pointA}).length&&0==f.dt.filter(function(a){return a.pointA==n.pointA&&a.pointB==n.pointB}).length&&0==f.dt.filter(function(a){return a.pointA==n.pointB&&a.pointB==n.pointA}).length&&f.add(n),d.push([a,l,n])}f.removeEdge(a)};!f.isEmpty();)x();return a||d.forEach(function(a){b.canvas.makeLinePoints(a[0].pointA,a[0].pointB,"black"),b.canvas.makeLinePoints(a[1].pointA,a[1].pointB,"black"),b.canvas.makeLinePoints(a[2].pointA,a[2].pointB,"black")}),d},g.prototype.delaunayDistance=function(d,g){var h=g.pointA,a=g.pointB,b=k.GetCenterOfPoints(h,a,d);if(null==b)return null;var c=e(f(b.x-d.x,2)+f(b.y-d.y,2));return k.isOnLeftPoints(h,a,b)&&k.isOnLeftPoints(h,a,d)||!k.isOnLeftPoints(h,a,b)&&!k.isOnLeftPoints(h,a,d)?c:-c},g.prototype.timer=function(a){return new Promise(function(b){return setTimeout(b,a)})},g.prototype.getRandomColor=function(){for(var a="#",b=0;6>b;b++)a+="0123456789ABCDEF"[d(16*Math.random())];return a},g}(),o=function(){function a(a){this.dt=a,this.edges=[]}return a.prototype.add=function(c){var d=c.pointA,a=c.pointB;0<this.edges.filter(function(b){return b.pointA==a&&b.pointB==d}).length?this.edges=this.edges.filter(function(b){return b.pointA!==d||b.pointB!==a}):this.edges.push(c),this.dt.push(c)},a.prototype.isEmpty=function(){return 0==this.edges.length},a.prototype.removeEdge=function(a){this.edges=this.edges.filter(function(b){return b.pointA!==a.pointA||b.pointB!==a.pointB})},a.prototype.firstEdge=function(){return this.edges[0]},a}(),p=function(){function a(a){this.canvas=a}return a.prototype.buildKDTree=function(a,b,c,d,e,f){var g,h;if(void 0===c&&(c=0),void 0===d&&(d=+this.canvas.getCanvas().clientWidth),void 0===e&&(e=0),void 0===f&&(f=+this.canvas.getCanvas().clientHeight),1==a.length)return new q(2,1,a[0],null,null,null);var i,j,k,l,m;if(!(b%2)){var n=this.sortPoints(a,"x");k=this.selectMedianPoint(n),this.drawLine(f,e,k.x,"x"),g=this.splitByMedianPoint(n),i=g[0],j=g[1],l=this.buildKDTree(i,b+1,c,k.x,e,f),m=this.buildKDTree(j,b+1,k.x,d,e,f)}else{var o=this.sortPoints(a,"y");k=this.selectMedianPoint(o),this.drawLine(c,d,k.y,"y"),h=this.splitByMedianPoint(o),i=h[0],j=h[1],l=this.buildKDTree(i,b+1,c,d,e,k.y),m=this.buildKDTree(j,b+1,c,d,k.y,f)}var p=new q(2,b,k,null,l,m);return l.setParent(p),m.setParent(p),p},a.prototype.sortPoints=function(a,c){var d=a.sort(function(d,a){return"x"==c?d.x-a.x:"y"==c?d.y-a.y:void 0});return d},a.prototype.splitByMedianPoint=function(a){var b=a.slice(0,d(a.length/2)),c=a.slice(d(a.length/2));return[b,c]},a.prototype.selectMedianPoint=function(a){return a[d(a.length/2)]},a.prototype.drawLine=function(a,b,c,d){"x"==d?this.canvas.makeLinePoints({x:c,y:a,color:""},{x:c,y:b,color:""},"red"):this.canvas.makeLinePoints({x:a,y:c,color:""},{x:b,y:c,color:""},"blue")},a}(),q=function(){function a(a,b,c,d,e,f){this.k=a,this.depth=b,this.point=c,this.parent=d,this.lesser=e,this.greater=f}return a.prototype.setParent=function(a){this.parent=a},a}(),r=function(){function a(a){var b=this;this.canvas=a,this.triangles=new n(a).Delaunay(!0);var d=this.triangles.map(function(a){return{edges:c(a),center:k.GetCenterOfPoints(a[0].pointA,a[0].pointB,a[1].pointB)}});d.forEach(function(a){b.canvas.addPoint(a.center.x,a.center.y,"red")}),d.forEach(function(a){d.forEach(function(c){b.areAdjacent(a.edges,c.edges)&&b.canvas.makeLinePoints(a.center,c.center,"red")})})}return a.prototype.areAdjacent=function(a,b){var c=!1;return a.forEach(function(a){c||b.forEach(function(b){if(a.pointA==b.pointA&&a.pointB==b.pointB||a.pointB==b.pointA&&a.pointA==b.pointB)return void(c=!0)})}),c},a.prototype.createVoronoiDiagram=function(){},a}();return{Canvas:g,ConvexHull:l,Triangulation:n,KDTree:p,Voronoi:r}}();
//# sourceMappingURL=svg-library.min.js.map
