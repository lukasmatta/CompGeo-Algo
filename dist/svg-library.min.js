var svgLibrary=function(){'use strict';function a(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new(c||(c=Promise))(function(c,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d["throw"](a))}catch(a){f(a)}}function i(a){a.done?c(a.value):e(a.value).then(g,h)}i((d=d.apply(a,b||[])).next())})}function b(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(e)throw new TypeError("Generator is already executing.");for(;k;)try{if(e=1,h&&(i=2&c[0]?h["return"]:c[0]?h["throw"]||((i=h["return"])&&i.call(h),0):h.next)&&!(i=i.call(h,c[1])).done)return i;switch((h=0,i)&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return k.label++,{value:c[1],done:!1};case 5:k.label++,h=c[1],c=[0];continue;case 7:c=k.ops.pop(),k.trys.pop();continue;default:if((i=k.trys,!(i=0<i.length&&i[i.length-1]))&&(6===c[0]||2===c[0])){k=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){k.label=c[1];break}if(6===c[0]&&k.label<i[1]){k.label=i[1],i=c;break}if(i&&k.label<i[2]){k.label=i[2],k.ops.push(c);break}i[2]&&k.ops.pop(),k.trys.pop();continue;}c=b.call(a,k)}catch(a){c=[6,a],h=0}finally{e=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e,h,i,j,k={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return j={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(j[Symbol.iterator]=function(){return this}),j}function c(){for(var b=0,c=0,d=arguments.length;c<d;c++)b+=arguments[c].length;for(var e=Array(b),f=0,c=0;c<d;c++)for(var g=arguments[c],a=0,h=g.length;a<h;a++,f++)e[f]=g[a];return e}var d=function(){function a(a){this.points=[],this.dragging=!1,this.polygon={points:[],lines:[]},this.creatingPolygon=!1,this.canvas=document.getElementById(a),this.canvas.addEventListener("mousemove",this.drag.bind(this)),this.canvas.addEventListener("mouseup",this.endDrag.bind(this)),this.canvas.addEventListener("mouseleave",this.endDrag.bind(this)),this.canvas.addEventListener("dblclick",this.addPointOnClick.bind(this)),this.canvas.addEventListener("click",this.addPolygonPoint.bind(this))}return a.prototype.getPoints=function(){return this.points},a.prototype.getCanvas=function(){return this.canvas},a.prototype.addPoint=function(a,b,c){console.log("point",a,b,c);var d=document.createElementNS("http://www.w3.org/2000/svg","circle");return d.setAttributeNS(null,"cx",a.toString()),d.setAttributeNS(null,"cy",b.toString()),d.setAttributeNS(null,"r","3"),d.setAttributeNS(null,"style","fill: "+(c||"black")+"; stroke: "+(c||"black")+"; stroke-width: 1px; cursor: move;"),d.addEventListener("mousedown",this.startDrag.bind(this)),this.points.push(d),this.canvas.appendChild(d),d},a.prototype.addPointOnClick=function(a){return this.addPoint(a.offsetX,a.offsetY)},a.prototype.setBackgroundColor=function(a){this.canvas.style.backgroundColor=a},a.prototype.startDrag=function(a){this.draggingObject=a.target,this.draggingObject.style.fill="red",this.dragging=!0},a.prototype.drag=function(a){this.dragging&&this.draggingObject&&(this.draggingObject.setAttributeNS(null,"cx",a.offsetX.toString()),this.draggingObject.setAttributeNS(null,"cy",a.offsetY.toString()))},a.prototype.endDrag=function(){this.dragging&&(this.dragging=!1,this.draggingObject.style.fill="black",this.draggingObject=null)},a.prototype.removeLines=function(){var a=this.canvas.getElementsByClassName("line"),b=Array.from(a);b.forEach(function(a){return a.remove()})},a.prototype.removePoints=function(){this.points.forEach(function(a){return a.remove()}),this.points=[]},a.prototype.clearCanvas=function(){this.removeLines(),this.removePoints(),this.polygon={points:[],lines:[]}},a.prototype.addPolygonPoint=function(a){if(this.creatingPolygon){var b=this.addPointOnClick(a);if(this.polygon.points.push(b),1<this.polygon.points.length){var c=this.polygon.points[this.polygon.points.length-2],d=this.makeLine(b,c);this.polygon.lines.push(d)}if(2<this.polygon.points.length){3<this.polygon.points.length&&this.polygon.lines.splice(this.polygon.lines.length-2,1)[0].remove();var e=this.polygon.points[0],d=this.makeLine(e,b);this.polygon.lines.push(d)}}},a.prototype.makeLine=function(a,b,c,d){var e=document.createElementNS("http://www.w3.org/2000/svg","line");d&&e.setAttribute("id",d),e.setAttribute("class","line"),e.setAttribute("x1",a.getAttribute("cx")),e.setAttribute("y1",a.getAttribute("cy")),e.setAttribute("x2",b.getAttribute("cx")),e.setAttribute("y2",b.getAttribute("cy")),e.setAttribute("stroke",c||"black");var f=this.canvas,g=f.appendChild(e);return g},a.prototype.makeLinePoints=function(a,b,c,d){var e=document.createElementNS("http://www.w3.org/2000/svg","line");d&&e.setAttribute("id",d),e.setAttribute("class","line"),console.log(a),e.setAttribute("x1",a.x.toString()),e.setAttribute("y1",a.y.toString()),e.setAttribute("x2",b.x.toString()),e.setAttribute("y2",b.y.toString()),e.setAttribute("stroke",c||"black");var f=this.canvas,g=f.appendChild(e);return g},a.prototype.getPolygon=function(){return this.polygon},a.prototype.startCreatingPolygon=function(){this.clearCanvas(),this.creatingPolygon=!0},a.prototype.stopCreatingPolygon=function(){this.creatingPolygon=!1},a.prototype.addRandomPoints=function(a){for(var b=0;b<a;b++){var c=Math.random()*(this.canvas.clientWidth-50-50)+50,d=Math.random()*(this.canvas.clientHeight-50-50)+50;this.addPoint(c,d)}},a.prototype.getSimplePoints=function(){var a=this.points.map(function(a){return{x:+a.getAttribute("cx"),y:+a.getAttribute("cy"),color:"black"}});return a},a}(),e=function(){function a(){}return a.isOnLeft=function(a,b,c){var e=(+c.getAttribute("cx")-+a.getAttribute("cx"))*(+b.getAttribute("cy")-+a.getAttribute("cy"))-(+c.getAttribute("cy")-+a.getAttribute("cy"))*(+b.getAttribute("cx")-+a.getAttribute("cx"));return 0>e},a}(),f=function(){function c(a){this.canvas=a}return c.prototype.JarvisMarch=function(){return a(this,void 0,Promise,function(){var a,c,d,f,g,h,k,l;return b(this,function(b){switch(b.label){case 0:this.canvas.removeLines(),a=this.canvas.getPoints(),this.colorPointsBlack(a),c=[],d=a[0],a.slice(1).forEach(function(a){+a.getAttribute("cx")<+d.getAttribute("cx")&&(d=a)}),f=d,h=0,b.label=1;case 1:f.style.fill="red",c.push(f),g=a[0],k=void 0,l=0,b.label=2;case 2:return l<a.length?(k=this.canvas.makeLine(a[l],f,"green"),(this.isPointEqual(g,f)||e.isOnLeft(f,g,a[l]))&&(g=a[l]),[4,this.timer(5)]):[3,5];case 3:b.sent(),null===k||void 0===k?void 0:k.remove(),b.label=4;case 4:return l++,[3,2];case 5:g&&(this.canvas.makeLine(g,f,"red"),g.style.fill="red"),f=g,h++,b.label=6;case 6:if(!this.isPointEqual(g,c[0])&&50>h)return[3,1];b.label=7;case 7:return[2,new Promise(function(a){return a(c)})];}})})},c.prototype.colorPointsBlack=function(a){a.forEach(function(a){return a.style.fill="black"})},c.prototype.GrahamScan=function(){return a(this,void 0,Promise,function(){var a,c,d,f,g,h;return b(this,function(b){switch(b.label){case 0:this.canvas.removeLines(),a=this.canvas.getPoints(),this.colorPointsBlack(a),c=[],d=a[0],a.slice(1).forEach(function(a){+a.getAttribute("cx")<+d.getAttribute("cx")&&(d=a),+a.getAttribute("cx")===+d.getAttribute("cx")&&+a.getAttribute("cy")<+d.getAttribute("cy")&&(d=a)}),a.sort(function(c,a){return e.isOnLeft(d,c,a)?-1:1}),f=[],g=0,b.label=1;case 1:if(!(g<a.length))return[3,4];for(h=a[g];1<c.length&&e.isOnLeft(c[c.length-2],h,c[c.length-1]);)c.pop().style.fill="black",f.pop().remove();return 1<=c.length&&f.push(this.canvas.makeLine(c[c.length-1],h,"red")),c.push(h),h.style.fill="red",[4,this.timer(200)];case 2:b.sent(),b.label=3;case 3:return g++,[3,1];case 4:return f.push(this.canvas.makeLine(c[c.length-1],c[0],"red")),[2,new Promise(function(a){return a(c)})];}})})},c.prototype.isPointEqual=function(a,b){return+a.getAttribute("cx")===+b.getAttribute("cx")&&+a.getAttribute("cy")===+b.getAttribute("cy")},c.prototype.timer=function(a){return new Promise(function(b){return setTimeout(b,a)})},c}(),g=function(){function d(a){this.canvas=a}return d.prototype.SweepingLine=function(){return a(this,void 0,Promise,function(){var a,d,f,g,h,j,k,l,m,n,o,p,q;return b(this,function(b){switch(b.label){case 0:for(a=this.canvas.getPolygon(),d=c(a.points),f=c(a.points),d.sort(function(c,a){return+c.getAttribute("cy")>+a.getAttribute("cy")?-1:+c.getAttribute("cy")===+a.getAttribute("cy")?+c.getAttribute("cx")<+a.getAttribute("cx")?-1:1:1}),d[0].style.fill="green",d[d.length-1].style.fill="red",g=(f.indexOf(d[0])+1)%f.length,h=f.length-1,j=g,k=[],l=[],m=k,n="yellow";0<h;)console.log("checking",j),f[j]==d[d.length-1]?(m=l,n="white"):(f[j].style.fill=n,m.push(f[j])),j=(j+1)%f.length,h--;o=[],o.push(d[0]),o.push(d[1]),p=2,b.label=1;case 1:if(!(p<d.length))return[3,4];if(k.includes(d[p])&&k.includes(o[o.length-1])||l.includes(d[p])&&l.includes(o[o.length-1])){for(;1<o.length&&(k.includes(d[p])&&e.isOnLeft(d[p],o[o.length-2],o[o.length-1])||l.includes(d[p])&&!e.isOnLeft(d[p],o[o.length-2],o[o.length-1]));)this.canvas.makeLine(d[p],o[o.length-2],"blue"),o.pop();o.push(d[p])}else{for(q=o[o.length-1];0<o.length;)this.canvas.makeLine(d[p],o.pop(),"red");o.push(q),o.push(d[p])}return[4,this.timer(500)];case 2:b.sent(),b.label=3;case 3:return p++,[3,1];case 4:return[2];}})})},d.prototype.timer=function(a){return new Promise(function(b){return setTimeout(b,a)})},d}(),h=function(){var b=Math.floor;function a(a){this.canvas=a}return a.prototype.buildKDTree=function(a,b,c,d,e,f){var g,h;if(void 0===c&&(c=0),void 0===d&&(d=+this.canvas.getCanvas().clientWidth),void 0===e&&(e=0),void 0===f&&(f=+this.canvas.getCanvas().clientHeight),1==a.length)return new i(2,1,a[0],null,null,null);var j,k,l,m,n;if(!(b%2)){var o=this.sortPoints(a,"x");l=this.selectMedianPoint(o),this.drawLine(f,e,l.x,"x"),g=this.splitByMedianPoint(o),j=g[0],k=g[1],m=this.buildKDTree(j,b+1,c,l.x,e,f),n=this.buildKDTree(k,b+1,l.x,d,e,f)}else{var p=this.sortPoints(a,"y");l=this.selectMedianPoint(p),this.drawLine(c,d,l.y,"y"),h=this.splitByMedianPoint(p),j=h[0],k=h[1],m=this.buildKDTree(j,b+1,c,d,e,l.y),n=this.buildKDTree(k,b+1,c,d,l.y,f)}var q=new i(2,b,l,null,m,n);return m.setParent(q),n.setParent(q),q},a.prototype.sortPoints=function(a,c){var d=a.sort(function(d,a){return"x"==c?d.x-a.x:"y"==c?d.y-a.y:void 0});return d},a.prototype.splitByMedianPoint=function(a){var c=a.slice(0,b(a.length/2)),d=a.slice(b(a.length/2));return[c,d]},a.prototype.selectMedianPoint=function(a){return a[b(a.length/2)]},a.prototype.drawLine=function(a,b,c,d){"x"==d?this.canvas.makeLinePoints({x:c,y:a,color:""},{x:c,y:b,color:""},"red"):this.canvas.makeLinePoints({x:a,y:c,color:""},{x:b,y:c,color:""},"blue")},a}(),i=function(){function a(a,b,c,d,e,f){this.k=a,this.depth=b,this.point=c,this.parent=d,this.lesser=e,this.greater=f}return a.prototype.setParent=function(a){this.parent=a},a}();return{Canvas:d,ConvexHull:f,Triangulation:g,KDTree:h}}();
//# sourceMappingURL=svg-library.min.js.map
